var Sequelize = require("sequelize");
var Op = Sequelize.Op;
var Model = require("../model");
var UserTickets = require("../model/userTickets");
var { Type, Topic, Post, File, Comment, User, Reply } = Model;
var postOrder = [
  ["updatedAt", "DESC"],
  [{ model: Comment }, "updatedAt", "ASC"]
];
var userTicketsInclude = [
  { model: UserTickets, attributes: ["hasUserTicket"] }
];
var rpyInclude = [
  {
    model: User,
    attributes: ["id", "username", "pictureUrl", "role"]
  }
];
var cmtInclude = [
  {
    model: User,
    attributes: ["id", "username", "pictureUrl", "role"]
  },
  {
    model: Reply,
    attributes: ["id", "text", "updatedAt"],
    include: rpyInclude
  }
];
var postInclude = [
  {
    model: Topic,
    attributes: ["id", "topicName"]
  },
  {
    model: Type,
    attributes: ["id", "typeName"]
  },
  {
    model: User,
    attributes: ["id", "username", "pictureUrl", "role"],
  },
  {
    model: File,
    attributes: ["id", "url", "fileName"]
  },
  {
    model: Comment,
    attributes: ["id", "text", "updatedAt"],
    include: cmtInclude
  }
];

module.exports = {
  rpyInclude,
  cmtInclude,
  postInclude,
  postOrder,
  userTicketsInclude
};
